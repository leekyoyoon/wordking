<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 게시판 처리 SQL -->
<mapper namespace="www.wordking.com.Mapper.VocaMapper">
	<insert id="insertVoca" parameterType="Voca">
	<selectKey keyProperty="seq" resultType="java.lang.Integer" order="BEFORE">
	(SELECT NVL(MAX(SEQ),0)+1 FROM wk_vocabularies)
	</selectKey>
	INSERT INTO wk_vocabularies
	(
		SEQ,
		USER_SEQ,
		CATEGORY_SEQ,
		TITLE
		,CONTENTS
		,VISIBLE
	) VALUES(
		(SELECT NVL(MAX(SEQ),0)+1 FROM wk_vocabularies),
		(SELECT TO_NUMBER(SEQ) FROM WK_USERS WHERE userId = #{userid}),
		#{category_seq},
		#{title},
		#{contents},
		#{visible}
	)
	
	</insert>
	<update id="insertImage" parameterType="Voca">
		UPDATE wk_vocabularies
			SET
			IMAGE = #{image}
		WHERE
			SEQ = (SELECT MAX(SEQ) FROM wk_vocabularies)
	</update>
	
</mapper>